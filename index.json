[{"content":"","date":"12 April 2023","permalink":"/blog/tags/cloud/","section":"Tags","summary":"","title":"cloud"},{"content":"","date":"12 April 2023","permalink":"/blog/tags/containers/","section":"Tags","summary":"","title":"containers"},{"content":"","date":"12 April 2023","permalink":"/blog/tags/development/","section":"Tags","summary":"","title":"development"},{"content":"","date":"12 April 2023","permalink":"/blog/tags/devops/","section":"Tags","summary":"","title":"devops"},{"content":"","date":"12 April 2023","permalink":"/blog/","section":"itamadev","summary":"","title":"itamadev"},{"content":"","date":"12 April 2023","permalink":"/blog/tags/kubernetes/","section":"Tags","summary":"","title":"kubernetes"},{"content":"In the world of container orchestration, Kubernetes is the de facto standard. It is an open-source platform for automating the deployment, scaling, and management of containerized applications. Kubernetes abstracts the underlying infrastructure and provides a unified API for managing containerized workloads. However, as with any complex system, Kubernetes is not immune to failures. In this article, we will discuss one such failure scenario - Pod and Node eviction in Kubernetes.\nWhat is Pod and Node Eviction? # Pod and Node eviction are two related concepts in Kubernetes. A Pod is the smallest deployable unit in Kubernetes. It consists of one or more containers that share the same network namespace and storage. A Node is a physical or virtual machine that runs the Kubernetes software and can host one or more Pods.\nPod eviction happens when a Pod is terminated by the Kubernetes system due to some reason, such as a Node failure or resource constraints. Node eviction, on the other hand, happens when a Node is marked un-schedulable and the Pods running on it are evicted to other Nodes.\nWhy does Pod and Node Eviction happen? # Pod and Node eviction can happen due to a variety of reasons, such as:\nNode failures - A Node can fail due to hardware or software issues, such as network failure, power outage, or kernel panic.\nResource constraints - A Node may run out of resources, such as CPU, memory, or disk space, which can cause Pods to be evicted.\nNode maintenance - A Node may be taken down for maintenance, such as kernel upgrades, security patches, or hardware replacement.\nPod failures - A Pod may fail due to application errors or resource constraints, which can trigger Pod eviction and rescheduling on other Nodes.\nSome Examples of Pod and Node Evictions # Node failure - Let\u0026rsquo;s say you have a Kubernetes cluster with three Nodes. One of the Nodes experiences a hardware failure, causing it to become un-schedulable. The Kubernetes scheduler identifies the Pods running on the failed Node and reschedules them on the remaining Nodes, marking the failed Node for eviction.\nResource constraints - If a Pod starts consuming too much CPU or memory, it can cause the Node to run out of resources. Kubernetes may then decide to evict the Pod to free up resources for other Pods running on the Node.\nNode maintenance - When you need to perform maintenance on a Node, you can mark it as un-schedulable using the Kubernetes API. Kubernetes then identifies the Pods running on the Node and reschedules them on other Nodes, allowing you to take the Node offline for maintenance.\nPod failures - If a Pod fails due to a crash or error, Kubernetes may decide to evict it and reschedule it on another Node. This helps ensure that the Pod remains available and responsive even in the face of failures.\nIn all of these scenarios, Kubernetes controllers monitor the state of Nodes and Pods and take appropriate actions to ensure the availability and reliability of your applications\nHow do Pod and Node Eviction work? # Pod and Node eviction are handled by Kubernetes controllers, which monitor the state of Nodes and Pods and take actions based on the configured policies. When a Node fails or becomes un-schedulable, the Kubernetes scheduler identifies the Pods running on the Node and selects new Nodes to run them. The Pods are then rescheduled on the new Nodes, and the old Nodes are marked for eviction.\nThe eviction process involves sending a SIGTERM signal to the containers running in the Pod, giving them a grace period to shut down gracefully. If the containers do not stop within the grace period, they are forcibly terminated with a SIGKILL signal. Once all the containers are terminated, the Pod is deleted from the Node.\nIn the case of Node eviction, the Kubernetes system follows a similar process. It first identifies the Pods running on the Node and selects new Nodes to run them. The Pods are then rescheduled on the new Nodes, and the old Node is marked un-schedulable. The Pods running on the old Node are then evicted using the same process as Pod eviction.\nHow can we handle Pod and Node Eviction? # Pod and Node eviction is inevitable in a Kubernetes cluster, and it is essential to have a strategy in place to handle them. Here are some best practices to handle Pod and Node eviction:\nUse resource limits - Set resource limits on Pods to prevent them from consuming all the resources on a Node, which can cause other Pods to be evicted.\nUse PodDisruptionBudgets - Use PodDisruptionBudgets to ensure that a minimum number of Pods are available during Pod eviction, which can prevent service disruption.\nUse NodeAffinity and anti-affinity - Use NodeAffinity and anti-affinity rules to ensure that Pods is scheduled on Nodes that meet certain criteria, such as having enough resources or being in a specific zone.\nUse node maintenance modes - Use node maintenance modes to gracefully drain a Node before evicting the Pods, which can prevent service disruption.\nSummary # Pod and Node eviction is an integral part of Kubernetes, and it is essential to understand how they work and how to handle them. By following the best practices mentioned above, you can ensure that your applications remain available and responsive even in the face of Pod and Node eviction.\nIn conclusion, Pod and Node eviction is a necessary \u0026ldquo;evil\u0026rdquo; in a Kubernetes cluster. While they may seem daunting, understanding how they work and taking the necessary precautions can help minimize their impact on your applications. As Kubernetes continues to evolve, we can expect more tools and techniques to emerge to help us manage Pod and Node eviction more effectively.\n","date":"12 April 2023","permalink":"/blog/posts/20230412-pod-node-eviction/","section":"Posts","summary":"What is Pod and Node Eviction in Kubernetes?","title":"Pod \u0026 Node Eviction"},{"content":"","date":"12 April 2023","permalink":"/blog/tags/software/","section":"Tags","summary":"","title":"software"},{"content":"","date":"12 April 2023","permalink":"/blog/tags/","section":"Tags","summary":"","title":"Tags"},{"content":"","date":"12 April 2023","permalink":"/blog/tags/tech/","section":"Tags","summary":"","title":"tech"},{"content":"When thinking about and testing new and exciting technologies, teams can often get overwhelmed with the thoughts of what to test. or what should be important to us even before testing or considering a tool, framework, or platform we might want to add to our tech stack.\nHere is a curated list of some of the key features I look into when learning and considering using tech in my personal projects or at work with the teams I work with.\nActivity \u0026amp; Community # One of the first and more noticeable things to look for when checking out new tech is the community and activity of the project, an active community can serve you well at the start and further down the road.\nIt could be helpful even when reading into the tool you\u0026rsquo;re using with more articles or documentation being written or when getting stuck and in need of help, someone might just be stuck with you, and even better - someone might have already got a solution to your problem!\nSome things to look for are:\nStars on GitHub ‚≠ê Is the project \u0026ldquo;mature\u0026rdquo;? (how long has it been in use/development) Active Users Issues \u0026amp; PRs A slack/discord/platform of the community Project Size # When looking to get a job done you might want some ready-made software to already do your job for you, and that\u0026rsquo;s great! so you can start and get your hands dirty with the real challenge.\nThat is indeed a very good way to not repeat others\u0026rsquo; work, but when doing so it\u0026rsquo;s important to remember you\u0026rsquo;re also introducing yourself to someone else\u0026rsquo;s code, someone you might not be familiar with and someone you might not be able to rely on for long.\nThat puts us in a position where the size of the project really matters.\nIf we\u0026rsquo;re looking at a complex project fixing a slight problem, we might be better off just implementing it ourselves, but if we are looking at a more challenging chore, considering using a project even if it\u0026rsquo;s a bit large, it can prove to be very practical and save us a lot of time in the end.\nMaintenance # As we just mentioned while talking about the project size and activity, maintenance is very important, we want to be sure we can rely on the projects we use.\nOpenSource projects don\u0026rsquo;t have a strict responsibility when it comes to maintenance, and when we don\u0026rsquo;t have active maintenance this metric becomes far more concerning, someday we might hear that our favorite CI/CD platform isn\u0026rsquo;t going to be maintained anymore, or even our central go framework which we based our whole application on will stop being maintained.\nSome tools have active support, and they might even have the founder/owner of the project actively responding to PRs, and Issues.\nWhile a strong community can really boost your whole workflow and process, support from the maker of the tool might be needed in some obscure use cases, it\u0026rsquo;s essential to rely on software that is actively being maintained, and so even without intimate support from the owner, the maintenance might be just enough, and we need to keep in mind that in the future the project might have a different owner and even from the active community.\nSomething important to keep in mind is that after we choose our technology we still need to actively watch out for updates and maintenance changes.\nProgramming Language # The last but certainly not least bullet point is the programming language being used and supported by the project.\nSometimes we might just be using a project as an outside service and sometimes as a fully integrated library or SDK.\nWe need to check that the main languages that we use are being supported and it\u0026rsquo;s even better if the project itself is written in one of them, then when experiencing problems or looking at Issues some of our team might be able to help fix them and submit a PR.\nThis metric isn\u0026rsquo;t as groundbreaking but can definitely serve you well, as I can say from my experience it has.\nSummary # We want to be aware when using someone else\u0026rsquo;s code and looking at new tech, we want to know we aren\u0026rsquo;t just inviting problems into our workflow and tech stack and we want to follow some rules in doing so. I hope now you can be a little bit more sure about when integrating new technologies into your tech stack.\n","date":"26 November 2022","permalink":"/blog/posts/20221126-adopting-tech/","section":"Posts","summary":"How to know if a tool is right for you?","title":"Adopting Technologies"},{"content":"","date":"26 November 2022","permalink":"/blog/tags/oss/","section":"Tags","summary":"","title":"oss"},{"content":"","date":"13 June 2022","permalink":"/blog/posts/","section":"Posts","summary":"","title":"Posts"},{"content":"","date":"1 January 0001","permalink":"/blog/_intex/","section":"itamadev","summary":"","title":""},{"content":"","date":"1 January 0001","permalink":"/blog/about/","section":"itamadev","summary":"","title":""},{"content":"","date":"1 January 0001","permalink":"/blog/projects/","section":"","summary":"","title":""},{"content":"","date":"1 January 0001","permalink":"/blog/authors/","section":"Authors","summary":"","title":"Authors"},{"content":"","date":"1 January 0001","permalink":"/blog/series/","section":"Series","summary":"","title":"Series"}]